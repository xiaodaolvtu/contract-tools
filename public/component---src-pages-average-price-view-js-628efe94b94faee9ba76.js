(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{128:function(e,t,a){"use strict";a.r(t);var n=a(6),r=a.n(n),c=a(46),i=a.n(c),o=a(0),l=a.n(o),s=a(141),u=a(397),p=a(245),d=a(405),m=a(408),f=function(e){function t(t){var a;return(a=e.call(this,t)||this).setPrice=function(e,t){var n=t.value;/^d*(?:.d{0,4})?$/.test(n)||console.log("aaa"),a.setState({price:n})},a.setCount=function(e,t){var n=t.value;return a.setState({count:n})},a.handleClick=function(){var e=a.state,t=e.price,n=e.count;console.log("@CheckInput:handleClick"+t+" "+n+" "+a.index),a.props.addContract&&a.props.addContract(t,n,a.index)},a.state={price:0,count:0},a.index=t.index,a.price=t.price,a.label=a.index+"：价格",a}return r()(t,e),t.prototype.render=function(){var e=this;return l.a.createElement(u.a,null,l.a.createElement(p.a,{attached:"top"},"加仓"+(this.index+1)),l.a.createElement(d.a,{size:"mini",label:"价格",onChange:this.setPrice,placeholder:this.price||0}),l.a.createElement(d.a,{size:"mini",action:l.a.createElement(m.a,{color:"teal",size:"mini",content:"确定",onClick:function(){return e.handleClick()}}),label:"张数",onChange:this.setCount,placeholder:0}))},t}(o.Component),h=a(406),v=a(198),g=a(407),b=a(150),y=["多单","空单"],E=["10x","20x"],C=["btc","ltc"],P=function(e){function t(t){var a;return(a=e.call(this,t)||this).state={contractType:"多单",leverage:"10x",openPrice:0,closePrice:0,amount:0,currency:"btc",liquidationPrice:0,inputs:[],finalPrice:0,finalAmount:0,finalLiquidationPrice:0,hidden:!0,message:""},a.setOpenPrice=function(e,t){var n=t.value;return a.setState({openPrice:n})},a.setProfits=function(e,t){var n=t.value;return a.setState({profits:n})},a.setAmount=function(e,t){var n=t.value;return a.setState({amount:n})},a.onClick=function(e){a.state.openPrice&&a.state.amount?a.setState({inputs:[].concat(a.state.inputs,{})}):a.myAlert("请填写仓位信息！")},a.clear=function(){a.setState({inputs:[]})},a.checkInitialInfo=function(){return a.getLiquidationPrice()},a.getLiquidationPrice=function(e,t){var n=e||a.state.openPrice,r=t||a.state.amount,c=("多单"===a.state.contractType?b.a.liquidation_price_long:b.a.liquidation_price_short)(a.state.currency,a.state.leverage,n,r);a.setState({liquidationPrice:c})},a.updateInputs=function(e,t,n){console.log(e+" "+t+" "+n);var r=a.state.inputs,c=[],i=r.length;return 1==i?0==n&&(c=[].concat({price:e,count:t})):c=2==i?0==n?[].concat({price:e,count:t},r[1]):[].concat(r[0],{price:e,count:t}):0==n?[].concat({price:e,count:t},r.slice(1,i)):n==i-1?[].concat(r.slice(0,n),{price:e,count:t}):[].concat(r.slice(0,n),{price:e,count:t},r.slice(n+1,i)),a.setState({inputs:[].concat(c)}),c},a.addContract=function(e,t,n){console.log("AveragePriceView:addContract"+e+" "+t+" "+n);var r=a.state,c=r.openPrice,i=r.amount,o=r.currency,l=a.updateInputs(parseFloat(e),parseFloat(t),n),s=[].concat({price:parseFloat(c),count:parseFloat(i)},l);console.log("deals:"+s.length+" "+s[1].price);var u=b.a.average_price(o,parseFloat(i),s);a.setState({finalPrice:u.price,finalAmout:u.count})},a.addInput=function(e,t){if(a.state.openPrice||a.state.amount)return l.a.createElement(f,{index:e,price:t})},a.myAlert=function(e){a.setState({hidden:!1,message:e});var t=i()(i()(a));setTimeout(function(){t.setState({hidden:!0,message:""})},3e3)},a.ref1=l.a.createRef(),a.ref2=l.a.createRef(),a.ref3=l.a.createRef(),a}return r()(t,e),t.prototype.render=function(){var e=this,t=this.state.inputs;return l.a.createElement(h.a.Pane,{style:{paddingBottom:"60px"}},!this.state.hidden&&l.a.createElement(v.a,{Floating:!0},this.state.message),l.a.createElement(g.a,null,l.a.createElement(g.a.Item,null,l.a.createElement(s.a,{group:!0,style:{marginLeft:"-4px",paddingLeft:"0px",marginTop:"5px"},ref:this.ref1,title:"合约类型",SetContractType:function(t){return e.setState({contractType:t})},values:y,defaultValue:y[0]}),l.a.createElement(s.a,{group:!0,style:{marginLeft:"-4px",paddingLeft:"0px",marginTop:"5px"},ref:this.ref2,title:"杠杆倍数",SetLeverage:function(t){return e.setState({leverage:t})},values:E,defaultValue:E[0]}),l.a.createElement(s.a,{group:!0,style:{marginLeft:"0px",paddingLeft:"0px",marginTop:"5px"},ref:this.ref3,title:"合约币种",SetCurrency:function(t){return e.setState({currency:t})},values:C,defaultValue:C[0]}),l.a.createElement(p.a,{style:{width:"130px",marginLeft:"4px"}}," 开仓价格: "),l.a.createElement(d.a,{size:"mini",style:{marginLeft:"18px"},label:{basic:!0,content:"$"},onChange:this.setOpenPrice,placeholder:"0"}),l.a.createElement("br",null),l.a.createElement(p.a,{style:{width:"130px",marginLeft:"4px"}}," 开仓数量: "),l.a.createElement(d.a,{size:"mini",label:{basic:!0,content:"张"},labelPosition:"right",style:{marginLeft:"18px"},onChange:this.setAmount,placeholder:"0"}),l.a.createElement(m.a,{color:"green",size:"mini",style:{borderRadius:0},content:"确定",onClick:this.checkInitialInfo}),l.a.createElement(v.a,{info:!0},l.a.createElement("b",null,"初始仓位信息："),l.a.createElement("br",null),"开仓价格：",l.a.createElement("b",{style:{color:"red"}},this.state.openPrice),"  |  合约类型：",l.a.createElement("b",{style:{color:"red"}},this.state.contractType),"  |  杠杆倍数：",l.a.createElement("b",{style:{color:"red"}},this.state.leverage),"  |  合约币种：",l.a.createElement("b",{style:{color:"red"}},this.state.currency),"  |  持仓数量：",l.a.createElement("b",{style:{color:"red"}},this.state.amount),"  |  爆仓价格：",l.a.createElement("b",{style:{color:"red"}},this.state.liquidationPrice),this.state.finalPrice?l.a.createElement("p",null,l.a.createElement("b",null,"最终仓位信息："),l.a.createElement("br",null),"平均价格：",l.a.createElement("b",{style:{color:"red"}},this.state.finalPrice),"  |  合约类型：",l.a.createElement("b",{style:{color:"red"}},this.state.contractType),"  |  杠杆倍数：",l.a.createElement("b",{style:{color:"red"}},this.state.leverage),"  |  合约币种：",l.a.createElement("b",{style:{color:"red"}},this.state.currency),"  |  持仓数量：",l.a.createElement("b",{style:{color:"red"}},this.state.finalAmount),"  |  爆仓价格：",l.a.createElement("b",{style:{color:"red"}},this.state.finalLiquidationPrice)):null))),l.a.createElement(m.a.Group,null,l.a.createElement(m.a,{onClick:this.clear},"清空"),l.a.createElement(m.a.Or,null),l.a.createElement(m.a,{positive:!0,onClick:this.onClick},"加仓")),l.a.createElement("br",null),t.length?t.map(function(t,a){return l.a.createElement(f,{index:a,addContract:function(t,a,n){return e.addContract(t,a,n)}})}):null)},t}(o.Component);t.default=P},141:function(e,t,a){"use strict";a.d(t,"a",function(){return d});a(66),a(48);var n=a(6),r=a.n(n),c=a(0),i=a.n(c),o=a(397),l=a(403),s=a(245),u=a(404),p={marginLeft:"20px"},d=function(e){function t(t){var a;return(a=e.call(this,t)||this).state={value:a.props.defaultValue||""},a.callback=a.props.SetContractType||a.props.SetLeverage||a.props.SetCurrency||null,a.handleChange=function(e,t){var n=t.value;return a.setState({value:n},a.callback(n))},a.ckRef=i.a.createRef(),a}r()(t,e);var a=t.prototype;return a.clear=function(){},a.render=function(){var e=this,t=this.props.values||[],a=o.a;return this.props.group&&(a=l.a),t.length>0?i.a.createElement(a,{style:this.props.style||null},i.a.createElement(s.a,{style:{width:"130px",marginLeft:"-9px"}},this.props.title,": "),t.map(function(t){return i.a.createElement(u.a,{ref:e.ckRef,style:p,radio:!0,label:t,name:"checkboxRadioGroup",value:t,checked:e.state.value===t,onChange:e.handleChange})})):null},t}(c.Component)},150:function(e,t,a){"use strict";a(66);var n={btc:100,ltc:10,other:10},r={average_price:function(e,t,a){var r=n[(""+e).toLowerCase()||"btc"],c=0;t=0;return a.forEach(function(e){e.price&&(t+=parseInt(e.count),c=parseFloat(c)+r*parseFloat(e.count)/parseFloat(e.price),console.log("@@"+c))}),{price:parseFloat(r*t/c).toFixed(4),count:t}},original_margin:function(e,t,a,r){var c=parseInt(n[e||"btc"]);return parseFloat(c*a/t).toFixed(4)/parseInt(r)},profit_long:function(e,t,a,r){var c=n[e||"btc"];return(c/a-c/t)*r},profit_short:function(e,t,a,r){var c=n[e||"btc"];return(c/t-c/a)*r},liquidation_price_long:function(e,t,a,c,i){var o=parseInt(n[e||"btc"]),l=1-parseInt(t||10)/100;return o/(o/a- -(i||r.original_margin(e,a,c,t))*l/c)},liquidation_price_short:function(e,t,a,c,i){var o=parseInt(n[e||"btc"]),l=1-parseInt(t||10)/100;return o/(o/a+-(i||r.original_margin(e,a,c,t))*l/c)}};t.a=r},198:function(e,t,a){"use strict";var n=a(133),r=a.n(n),c=a(135),i=a.n(c),o=a(136),l=a.n(o),s=a(137),u=a.n(s),p=a(138),d=a.n(p),m=a(139),f=a.n(m),h=a(46),v=a.n(h),g=a(47),b=a.n(g),y=a(144),E=a.n(y),C=(a(145),a(134)),P=a.n(C),x=(a(4),a(0)),O=a.n(x),j=a(152),k=a(209),S=a(210),N=a(132),L=a(232),I=a(199);function T(e){var t=e.children,a=e.className,n=e.content,c=P()("content",a),i=Object(k.a)(T,e),o=Object(S.a)(T,e);return O.a.createElement(o,r()({},i,{className:c}),N.a.isNil(t)?n:t)}T.handledProps=["as","children","className","content"],T.propTypes={};var w=T;function _(e){var t=e.children,a=e.className,n=e.content,c=P()("header",a),i=Object(k.a)(_,e),o=Object(S.a)(_,e);return O.a.createElement(o,r()({},i,{className:c}),N.a.isNil(t)?n:t)}_.handledProps=["as","children","className","content"],_.propTypes={},_.create=Object(L.d)(_,function(e){return{content:e}});var F=_,q=a(149),A=a.n(q);function z(e){var t=e.children,a=e.className,n=e.content,c=P()("content",a),i=Object(k.a)(z,e),o=Object(S.a)(z,e);return O.a.createElement(o,r()({},i,{className:c}),N.a.isNil(t)?n:t)}z.handledProps=["as","children","className","content"],z.propTypes={},z.defaultProps={as:"li"},z.create=Object(L.d)(z,function(e){return{content:e}});var R=z;function G(e){var t=e.children,a=e.className,n=e.items,c=P()("list",a),i=Object(k.a)(G,e),o=Object(S.a)(G,e);return O.a.createElement(o,r()({},i,{className:c}),N.a.isNil(t)?A()(n,R.create):t)}G.handledProps=["as","children","className","items"],G.propTypes={},G.defaultProps={as:"ul"},G.create=Object(L.d)(G,function(e){return{items:e}});var D=G;a.d(t,"a",function(){return V});var V=function(e){function t(){var e,a;i()(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return a=u()(this,(e=d()(t)).call.apply(e,[this].concat(r))),b()(v()(v()(a)),"handleDismiss",function(e){var t=a.props.onDismiss;t&&t(e,a.props)}),a}return f()(t,e),l()(t,[{key:"render",value:function(){var e=this.props,a=e.attached,n=e.children,c=e.className,i=e.color,o=e.compact,l=e.content,s=e.error,u=e.floating,p=e.header,d=e.hidden,m=e.icon,f=e.info,h=e.list,v=e.negative,g=e.onDismiss,b=e.positive,y=e.size,C=e.success,x=e.visible,T=e.warning,_=P()("ui",i,y,Object(j.a)(o,"compact"),Object(j.a)(s,"error"),Object(j.a)(u,"floating"),Object(j.a)(d,"hidden"),Object(j.a)(m,"icon"),Object(j.a)(f,"info"),Object(j.a)(v,"negative"),Object(j.a)(b,"positive"),Object(j.a)(C,"success"),Object(j.a)(x,"visible"),Object(j.a)(T,"warning"),Object(j.b)(a,"attached"),"message",c),q=g&&O.a.createElement(I.a,{name:"close",onClick:this.handleDismiss}),A=Object(k.a)(t,this.props),z=Object(S.a)(t,this.props);return N.a.isNil(n)?O.a.createElement(z,r()({},A,{className:_}),q,I.a.create(m,{autoGenerateKey:!1}),(!E()(p)||!E()(l)||!E()(h))&&O.a.createElement(w,null,F.create(p,{autoGenerateKey:!1}),D.create(h,{autoGenerateKey:!1}),Object(L.c)(l,{autoGenerateKey:!1}))):O.a.createElement(z,r()({},A,{className:_}),q,n)}}]),t}(x.Component);b()(V,"Content",w),b()(V,"Header",F),b()(V,"List",D),b()(V,"Item",R),b()(V,"handledProps",["as","attached","children","className","color","compact","content","error","floating","header","hidden","icon","info","list","negative","onDismiss","positive","size","success","visible","warning"]),V.propTypes={}}}]);
//# sourceMappingURL=component---src-pages-average-price-view-js-628efe94b94faee9ba76.js.map